# アドレス

公開鍵を圧縮するユーティリティ。

<CH.Spotlight>
  <CH.Code>
    ```js addressUtils.js
    const { getCompressedPublicKey } = require('@kaiachain/ethers-ext/v5')

    async function main() {
      const publicKeyObject = {
        x: '0xdc9dccbd788c00fa98f7f4082f2f714e799bc0c29d63f04d48b54fe6250453cd',
        y: '0xaf06ca34ae8714cf3dae06bacdb78c7c2d4054bd38961d40853cd5f15955da79',
      }
      console.log(
        'pubkey from { x, y } object =',
        getCompressedPublicKey(publicKeyObject)
      )

      const uncompressedPublicKeyString =
        '0x04dc9dccbd788c00fa98f7f4082f2f714e799bc0c29d63f04d48b54fe6250453cdaf06ca34ae8714cf3dae06bacdb78c7c2d4054bd38961d40853cd5f15955da79'
      console.log(
        'pubkey from uncompressed format =',
        getCompressedPublicKey(uncompressedPublicKeyString)
      )
    }

    main()
    ```

    ---

    ```zsh output
    ❯ node addressUtils.js
    pubkey from { x, y } object = 0x03dc9dccbd788c00fa98f7f4082f2f714e799bc0c29d63f04d48b54fe6250453cd
    pubkey from uncompressed format = 0x03dc9dccbd788c00fa98f7f4082f2f714e799bc0c29d63f04d48b54fe6250453cd
    ```
  </CH.Code>

  ---

  **getCompressedPublicKey**を**kaiachain/ethers-ext**パッケージからインポートする。

  ```js addressUtils.js focus=1
  ```

  ---

  `{x, y}` フォーマットの公開鍵を16進数に圧縮するには、 **公開鍵オブジェクト** をパラメータとして `getCompressedPublicKey` を使用する。

  <CH.Code>
    ```js addressUtils.js focus=4:11
    const { getCompressedPublicKey } = require('@kaiachain/ethers-ext/v5')

    async function main() {
      const publicKeyObject = {
        x: '0xdc9dccbd788c00fa98f7f4082f2f714e799bc0c29d63f04d48b54fe6250453cd',
        y: '0xaf06ca34ae8714cf3dae06bacdb78c7c2d4054bd38961d40853cd5f15955da79',
      }
      console.log(
        'pubkey from { x, y } object =',
        getCompressedPublicKey(publicKeyObject)
      )
    }

    main()
    ```

    ---

    ```zsh output
    ❯ node addressUtils.js
    pubkey from { x, y } object = 0x03dc9dccbd788c00fa98f7f4082f2f714e799bc0c29d63f04d48b54fe6250453cd
    ```
  </CH.Code>

  ---

  そうでなければ、**圧縮されていない16進数**から**public key**を圧縮したい場合、**圧縮されていない公開鍵**を引数として、`getCompressedPublicKey`を使用する。

  <CH.Code>
    ```js addressUtils.js focus=4:9
    const { getCompressedPublicKey } = require('@kaiachain/ethers-ext/v5')

    async function main() {
      const uncompressedPublicKeyString =
        '0x04dc9dccbd788c00fa98f7f4082f2f714e799bc0c29d63f04d48b54fe6250453cdaf06ca34ae8714cf3dae06bacdb78c7c2d4054bd38961d40853cd5f15955da79'
      console.log(
        'pubkey from uncompressed format =',
        getCompressedPublicKey(uncompressedPublicKeyString)
      )
    }

    main()
    ```

    ---

    ```zsh output
    ❯ node addressUtils.js
    pubkey from uncompressed format = 0x03dc9dccbd788c00fa98f7f4082f2f714e799bc0c29d63f04d48b54fe6250453cd
    ```
  </CH.Code>
</CH.Spotlight>
