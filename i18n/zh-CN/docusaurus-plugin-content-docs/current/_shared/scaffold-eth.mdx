import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'

# ä½¿ç”¨ Scaffold-ETH 2 æ„å»º dApp

![](/img/banners/kaia-scaffold.png)

## å¯¼è¨€<a href="#introduction" id="introduction" />

Scaffold-ETH 2 æ˜¯ä¸€ä¸ªå¼€æºå·¥å…·åŒ…ï¼Œç”¨äºåœ¨ä»¥å¤ªåŠå’Œå…¶ä»–ä¸ EVM å…¼å®¹çš„åŒºå—é“¾ï¼ˆå¦‚ Kaiaï¼‰ä¸Šæ„å»ºå»ä¸­å¿ƒåŒ–åº”ç”¨ç¨‹åºï¼ˆdAppsï¼‰ã€‚ å€ŸåŠ© Scaffold-ETH 2ï¼Œå¼€å‘äººå‘˜å¯ä»¥è½»æ¾éƒ¨ç½² Solidity æ™ºèƒ½åˆçº¦ï¼Œå¹¶ä½¿ç”¨ React å‰ç«¯å¯åŠ¨ dAppã€‚

Scaffold-ETH 2 å·¥å…·åŒ…ä½¿ç”¨ Next.jsã€RainbowKitã€Hardhatã€Foundryã€Wagmi å’Œ TypeScript æ„å»ºã€‚ å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ Hardhat æˆ– Foundry è½»æ¾åˆ›å»ºã€æµ‹è¯•å’Œéƒ¨ç½²æ™ºèƒ½åˆçº¦ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ Next.js æ„å»º React å‰ç«¯ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Scaffold-ETH 2 åœ¨ Kaia ä¸Šéƒ¨ç½²ã€è¿è¡Œåˆçº¦å’Œæ„å»º dAppã€‚

## å…ˆå†³æ¡ä»¶<a href="#prerequisites" id="prerequisites" />

è¦å¼€å§‹å­¦ä¹ æœ¬æŒ‡å—ï¼Œæ‚¨éœ€è¦

* [èŠ‚ç‚¹ (>= v18.17)](https://nodejs.org/en/download/)
* çº±çº¿ ([v1](https://classic.yarnpkg.com/en/docs/install/) æˆ– [v2+](https://yarnpkg.com/getting-started/install))
* ç†Ÿæ‚‰ Javascript å’Œ React åŸºç¡€çŸ¥è¯†ï¼Œä¾‹å¦‚é’©å­
* [Metamask Wallet](https://metamask.io/download/)
* æµ‹è¯•æ¥è‡ª [æ°´é¾™å¤´] çš„ KAIA(https://faucet.kaia.io)
* RPC ç«¯ç‚¹ï¼šå¯ä»å—æ”¯æŒçš„[ç«¯ç‚¹æä¾›å•†]ä¹‹ä¸€è·å–ï¼ˆhttps://docs.kaia.io/references/public-en/)

## è®¾ç½®å¼€å‘ç¯å¢ƒ<a href="#setting-up-dev-environment" id="setting-up-dev-environment" />

è¦å®‰è£… Scaffold-ETH 2ï¼Œæ‚¨æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œè¦ä¹ˆå…‹éš† [Scaffold-ETH 2 èµ„æºåº“](https://github.com/scaffold-eth/scaffold-eth-2) å®‰è£…ï¼Œè¦ä¹ˆä½¿ç”¨ `npx create-eth@latest` å®‰è£…ã€‚

åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ npx æ–¹æ³•æ¥å¼•å¯¼ Scaffold-ETH 2 é¡¹ç›®ã€‚

è¿è¡Œä»¥ä¸‹å‘½ä»¤å¼•å¯¼ Scaffold-ETH 2 é¡¹ç›®ï¼š

```bash
npx create-eth@latest
```

æ‚¨å°†çœ‹åˆ°ä¸€ç³»åˆ—æç¤ºï¼š

**é¡¹ç›®åç§°**ï¼šè¾“å…¥é¡¹ç›®åç§°ï¼š è¾“å…¥é¡¹ç›®åç§°ï¼Œå¦‚ kaia-scaffold-exampleã€‚

\*\* å®ä½“æ¡†æ¶\*\*ï¼›æ‚¨æƒ³ä½¿ç”¨å“ªç§å®ä½“æ¡†æ¶ï¼Ÿé€‰æ‹©æ‚¨å–œæ¬¢çš„å®ä½“æ¡†æ¶ï¼ˆHardhatã€Foundryï¼‰ã€‚ åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ **Hardhat** æ¡†æ¶ã€‚

**Install packages?**ï¼šæŒ‰å›è½¦é”®è¡¨ç¤ºæ˜¯ï¼ˆé»˜è®¤é€‰é¡¹ï¼‰æˆ–è¾“å…¥ n å¹¶æŒ‰å›è½¦é”®è¡¨ç¤ºå¦
è®¾ç½®å®Œæˆåï¼Œå¯¼èˆªè‡³é¡¹ç›®ç›®å½•ã€‚

```bash
cd project-name
// e.g  cd kaia-scaffold-example
```

![Scaffold-ETH setup](/img/build/tutorials/scaffold-1.png)

## Scaffold-ETH 2 å¼€å‘è¿‡ç¨‹çš„äº®ç‚¹<a href="#highlight-of-dev-environment" id="highlight-of-dev-environment" />

ä½¿ç”¨ Scaffold-ETH 2 å¼€å‘é¡¹ç›®çš„æµç¨‹å¯æ¦‚è¿°å¦‚ä¸‹ï¼š

1. æ›´æ–°**packages/hardhat/hardhat.config.ts**æ–‡ä»¶ä¸­é’ˆå¯¹Kaiaçš„Hardhatç½‘ç»œé…ç½®
2. å°†æ™ºèƒ½åˆçº¦æ·»åŠ åˆ° **packages/hardhat/contracts** ä¸­
3. ç¼–è¾‘ **packages/hardhat/deploy** ä¸­çš„éƒ¨ç½²è„šæœ¬
4. å°†æ™ºèƒ½åˆçº¦éƒ¨ç½²åˆ° Kaia
5. ä½¿ç”¨ç¡¬å¸½éªŒè¯æ’ä»¶éªŒè¯æ™ºèƒ½åˆçº¦
6. åœ¨ **packages/nextjs/scaffold.config.ts** æ–‡ä»¶ä¸­é…ç½®å‰ç«¯ä»¥ Kaia ä¸ºç›®æ ‡
7. åœ¨ **packages/nextjs/pages**ç›®å½•ä¸‹æ ¹æ®éœ€è¦ç¼–è¾‘ä½ çš„å‰å°

åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Scaffold-ETH 2 å®‰è£…åå¯ç”¨çš„é»˜è®¤ç¤ºä¾‹åˆåŒå’Œå‰ç«¯ã€‚ åªéœ€ä¸º Kaia ä¿®æ”¹è¿™äº›ç»„ä»¶å³å¯ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†æŠŠé…ç½®åˆ†ä¸º **Hardhat** å’Œ **Next.js** é…ç½®ã€‚

## ç¡¬å¤´ç›”é…ç½®

åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†ä¿®æ”¹ Hardhat é…ç½®æ–‡ä»¶ä¸­çš„ç½‘ç»œé…ç½®ï¼Œä»¥**packages/hardhat**æ–‡ä»¶å¤¹ä¸‹çš„ Kaia ä¸ºç›®æ ‡ã€‚

### ä¸º Kaia é…ç½® Hardhat

**ç¬¬ 1 æ­¥ï¼šé…ç½®ç½‘ç»œ**

æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯é…ç½® `hardhat.config.ts` ä»¥æ”¯æŒ Kaia ç½‘ç»œã€‚ è½¬åˆ° `packages/hardhat/hardhat.config.ts`ï¼Œå°† Kaia ç½‘ç»œæ·»åŠ åˆ°ç½‘ç»œå¯¹è±¡ä¸­ã€‚

<Tabs>
  <TabItem value="å¡å¨…" label="Kaia Mainnet" default>
    ```javascript
      networks: {
        // â€¦ other networks
        kaia: {
          chainId: 8217,
          url: "https://public-en.node.kaia.io",
          accounts: [deployerPrivateKey],
        },
      }
    ```
  </TabItem>

  <TabItem value="å¯ç¤ºå½•" label="å¯æ˜æ˜Ÿæµ‹è¯•ç½‘">
    ```javascript
      networks: {
        // â€¦ other networks
        kairos: {
          chainId: 1001,
          url: "https://public-en-kairos.node.kaia.io",
          accounts: [deployerPrivateKey],
        },
      } 
    ```
  </TabItem>
</Tabs>

**ç¬¬ 2 æ­¥ï¼šç”Ÿæˆä¸€ä¸ªæ–°è´¦æˆ·æˆ–æ·»åŠ ä¸€ä¸ªè´¦æˆ·ï¼Œä»¥ä¾¿ä»è¯¥è´¦æˆ·éƒ¨ç½²åˆåŒ**

æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯é…ç½®æ‚¨çš„è´¦æˆ·ã€‚  æ‚¨å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä¸€ä¸ªéšæœºè´¦æˆ·/ç§äººå¯†é’¥ï¼š

```bash
yarn generate 
```

å®ƒä¼šè‡ªåŠ¨åœ¨`.env`æ–‡ä»¶ä¸­æ·»åŠ åŠ å¯†ç§é’¥ï¼ˆDEPLOYER_PRIVATE_KEY_ENCRYPTEDï¼‰ã€‚

:::note
ç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥å¯†ç ï¼Œè¯¥å¯†ç å°†ç”¨äºåŠ å¯†æ‚¨çš„ç§äººå¯†é’¥ã€‚ è¯·ä¸è¦å¿˜è®°è¿™ä¸ªå¯†ç ï¼Œå› ä¸ºåœ¨ä»Šåçš„éƒ¨ç½²å’Œè´¦æˆ·æŸ¥è¯¢ä¸­ä¼šç”¨åˆ°å®ƒã€‚
:::

å¦‚æœæ‚¨å¸Œæœ›å¯¼å…¥ç§äººå¯†é’¥ï¼Œè¯·è¿è¡Œ

```bash
yarn account:import
```

ç³»ç»Ÿä¼šæç¤ºæ‚¨ç²˜è´´ç§äººå¯†é’¥å¹¶è®¾ç½®åŠ å¯†å¯†ç ã€‚ å®ƒä¼šå°†åŠ å¯†åçš„ç§äººå¯†é’¥ä¿å­˜åœ¨`.env`æ–‡ä»¶ä¸­ã€‚

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ£€æŸ¥å·²é…ç½®ï¼ˆç”Ÿæˆæˆ–å¯¼å…¥ï¼‰çš„è´¦æˆ·å’Œä½™é¢ï¼š

```bash
yarn account
```

åœ¨æ­¤æ­¥éª¤ä¸­ï¼Œæ‚¨è¿˜éœ€è¦è¾“å…¥å¯†ç æ‰èƒ½è§£å¯†ç§äººå¯†é’¥å¹¶æŸ¥çœ‹è´¦æˆ·ä¿¡æ¯å’Œä½™é¢ã€‚

### å‘ Kaia éƒ¨ç½²åˆåŒ

é…ç½® Hardhat ä»¥æ”¯æŒ Kaia ç½‘ç»œåï¼Œä¸‹ä¸€æ­¥å°±æ˜¯ç¼–è¯‘å’Œéƒ¨ç½²åˆåŒæ ·æœ¬ã€‚

é¦–å…ˆï¼Œæ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ

```bash
yarn compile
```

æ¥ä¸‹æ¥ï¼Œè¦éƒ¨ç½²æ‚¨çš„åˆåŒï¼Œæ‚¨æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š

**é€‰é¡¹ 1ï¼šè®¾ç½®é»˜è®¤ç½‘ç»œ**

å°†`hardhat.config.ts`æ–‡ä»¶ä¸­çš„**defaultNetwork**å­—æ®µé…ç½®ä¸º kaia æˆ– kairosã€‚

è¿è¡Œ `yarn deploy` æ—¶ï¼ŒåˆåŒå°†éƒ¨ç½²åˆ°æŒ‡å®šçš„é»˜è®¤ç½‘ç»œã€‚

**é€‰é¡¹ 2ï¼šæ˜ç¡®æŒ‡å®šç½‘ç»œ**

è¦éƒ¨ç½²åˆ°ç‰¹å®šç½‘ç»œï¼Œè¯·åœ¨è¿è¡Œéƒ¨ç½²å‘½ä»¤æ—¶ä½¿ç”¨ `--network` æ ‡å¿—ï¼š

```bash
yarn deploy --network network_name
```

ä¾‹å¦‚ï¼š`yarn deploy --network kairos`

**è¾“å‡º**ï¼š

```bash
% yarn deploy

âœ” Enter password to decrypt private key:
Nothing to compile
No need to generate any newer typings.
deploying "YourContract" (tx: 0x90d0587fcbbfd34057c9bc8c77a3ae56807bcee20c19b278499ca5da70affbbb)...: deployed at 0xb1ea8476debb6d3021cC3a179B9eC21e01742d82 with 534186 gas
ğŸ‘‹ Initial greeting: Building Unstoppable Apps!!!
ğŸ“ Updated TypeScript contract definition file on ../nextjs/contracts/deployedContracts.ts
```

### éªŒè¯æ‚¨å·²éƒ¨ç½²çš„åˆåŒ<a href="#verify-deployed-contract" id="verify-deployed-contract" />

è¦éªŒè¯å·²éƒ¨ç½²çš„åˆåŒï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç¡¬å¸½éªŒè¯æ’ä»¶ã€‚ åªéœ€åœ¨ harhdat-verify etherscan é…ç½®å¯¹è±¡ä¸‹çš„**hardhat.config.ts**ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®å³å¯ã€‚

<Tabs>
  <TabItem value="å¡å¨…" label="Kaia Mainnet" default>
    ```js
      etherscan: {
        apiKey: {
          kaia: "unnecessary",
        },
        customChains: [
          {
            network: "kaia",
            chainId: 8217,
            urls: {
              apiURL: "https://mainnet-api.kaiascan.io/hardhat-verify",
              browserURL: "https://kaiascan.io",
            },
          },
        ],
      },
    ```
  </TabItem>

  <TabItem value="å¯ç¤ºå½•" label="å¯æ˜æ˜Ÿæµ‹è¯•ç½‘">
    ```js
      etherscan: {
        apiKey: {
          kairos: "unnecessary",
        },
        customChains: [
          {
            network: "kairos",
            chainId: 1001,
            urls: {
              apiURL: "https://kairos-api.kaiascan.io/hardhat-verify",
              browserURL: "https://kairos.kaiascan.io",
            },
          },
        ],
      },
    ```
  </TabItem>
</Tabs>

æ¥ä¸‹æ¥ï¼Œåœ¨ç»ˆç«¯ä¸­å¤åˆ¶å¹¶ç²˜è´´ä»¥ä¸‹å‘½ä»¤æ¥éªŒè¯æ™ºèƒ½åˆçº¦ï¼š

ç¤ºä¾‹

```bash
yarn hardhat-verify --network network_name contract_address "Constructor arg 1"
```

å®é™…

```bash
yarn hardhat-verify --network kairos 0xb1ea8476debb6d3021cC3a179B9eC21e01742d82
 "0xDe75f893078D25fBA2eE090A3971baF832F15A88"
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œè¦éªŒè¯åˆåŒï¼Œå¿…é¡»è¾“å…¥ç½‘ç»œåç§°ã€åˆåŒåœ°å€å’Œæ„é€ å‡½æ•°å‚æ•°ï¼ˆå¦‚æœ‰ï¼‰ã€‚ ç¨ç­‰ç‰‡åˆ»åï¼Œæ§åˆ¶å°å°†æ˜¾ç¤ºéªŒè¯ç»“æœï¼Œå¦‚æœéªŒè¯æˆåŠŸï¼Œè¿˜å°†æä¾› KaiaScan ä¸Šå·²éªŒè¯åˆåŒçš„ URLã€‚

**è¾“å‡º**ï¼š

```bash
% yarn hardhat-verify --network kairos 0xb1ea8476debb6d3021cC3a179B9eC21e01742d82 "0xDe75f893078D25fBA2eE090A3971baF832F15A88"

Successfully submitted source code for contract
contracts/YourContract.sol:YourContract at 0xb1ea8476debb6d3021cC3a179B9eC21e01742d82
for verification on the block explorer. Waiting for verification result...

Successfully verified contract YourContract on the block explorer.
https://kairos.kaiascan.io/address/0xb1ea8476debb6d3021cC3a179B9eC21e01742d82#code
```

ï¼[è„šæ‰‹æ¶éªŒè¯](/img/build/tutorials/scaffold-3.png)

æœ‰å…³åœ¨ Kaia ä¸Šä½¿ç”¨ Hardhat Verify æ’ä»¶éªŒè¯æ™ºèƒ½åˆçº¦çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… [Hardhat Verify Plugin guide](https://docs.kaia.io/build/smart-contracts/verify/hardhat/)ã€‚

## Next.js é…ç½®<a href="#nextjs-configuration" id="nextjs-configuration" />

åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†ä¿®æ”¹ Next.js é…ç½®ï¼Œä½¿å…¶é’ˆå¯¹**packages/nextjs**æ–‡ä»¶å¤¹ä¸‹çš„ Kairos Testnetï¼ˆæ™ºèƒ½åˆçº¦éƒ¨ç½²åˆ°äº†è¿™é‡Œï¼‰ã€‚ åœ¨æœ¬æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬æ‰“ç®—ä¿®æ”¹ **scaffold.config.ts** æ–‡ä»¶ä¸­ scaffoldConfig å¯¹è±¡çš„ **targetNetwork** æ•°ç»„ã€‚

### ä¿®æ”¹ targetNetwork æ•°ç»„<a href="#modify-targetnetwork-array" id="modify-targetnetwork-array" />

```js
targetNetworks: [chains.kaia, chains.kairos],
```

è¿™å°±æ˜¯é…ç½® Next.js çš„å…¨éƒ¨è¦æ±‚ï¼ æ¥ä¸‹æ¥ï¼Œåœ¨æœ¬åœ°ä¸»æœºä¸Šå¯åŠ¨ dAppã€‚

### åœ¨æœ¬åœ°ä¸»æœºå¯åŠ¨åº”ç”¨ç¨‹åº<a href="#launch-dapp-in-localhost" id="launch-dapp-in-localhost" />

å®Œæˆæ‰€æœ‰å¿…è¦é…ç½®åï¼Œæ‚¨å°±å¯ä»¥åœ¨æœ¬åœ°ä¸»æœºä¸Šå¯åŠ¨ç¤ºä¾‹åº”ç”¨ç¨‹åºäº†ã€‚

ä¸ºæ­¤ï¼Œè¯·è¿è¡Œ

```bash
yarn start
```

ç°åœ¨ï¼Œæ‚¨åº”è¯¥å¯ä»¥åœ¨ http://localhost:3000/ ä¸Šè®¿é—®åŸºäº React çš„ dApp å‰ç«¯ã€‚ æ‚¨å¯ä»¥é€šè¿‡è¿æ¥é’±åŒ…æˆ–æŸ¥çœ‹åˆçº¦è°ƒè¯•å™¨é¡µé¢ä¸ dApp è¿›è¡Œäº’åŠ¨ã€‚

![Scaffold dApp](/img/build/tutorials/scaffold-5.png)

## ç»“è®º

ç¥è´ºä½  æ‚¨å·²æˆåŠŸä½¿ç”¨ Scaffold-ETH 2 åœ¨ Kaia ä¸Šéƒ¨ç½²äº†ä¸€ä¸ªåˆçº¦å¹¶è¿è¡Œäº†ä¸€ä¸ª dAppã€‚ ç°åœ¨æ‚¨å·²ç»äº†è§£ Scaffold-ETH 2 çš„å·¥ä½œåŸç†ï¼Œå¯ä»¥éšæ„åˆ›å»ºå’Œéƒ¨ç½²è‡ªå·±çš„æ™ºèƒ½åˆçº¦ï¼Œå¹¶ä¿®æ”¹å‰ç«¯ä»¥æ»¡è¶³æ‚¨çš„ dApp éœ€æ±‚ï¼

å¦‚éœ€äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—® [Scaffold-ETH 2 æ–‡æ¡£](https://docs.scaffoldeth.io/) ï¼›å¦‚æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·è®¿é—® [Kaia è®ºå›](https://devforum.kaia.io/) ã€‚
