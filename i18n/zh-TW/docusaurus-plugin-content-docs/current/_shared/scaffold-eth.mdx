import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'

# ä½¿ç”¨ Scaffold-ETH 2 å»ºç«‹ dApp

![](/img/banners/kaia-scaffold.png)

## ç°¡ä»‹<a href="#introduction" id="introduction" />

Scaffold-ETH 2 æ˜¯åœ¨ Ethereum å’Œå…¶ä»– EVM ç›¸å®¹çš„å€å¡Šéˆ (å¦‚ Kaia) ä¸Šå»ºç«‹åˆ†æ•£å¼æ‡‰ç”¨ç¨‹å¼ (dApp) çš„é–‹æ”¾åŸå§‹ç¢¼å·¥å…·åŒ…ã€‚ é€é Scaffold-ETH 2ï¼Œé–‹ç™¼äººå“¡å¯ä»¥è¼•é¬†éƒ¨ç½² Solidity æ™ºæ…§å‹å¥‘ç´„ï¼Œä¸¦ä½¿ç”¨ React å‰ç«¯å•Ÿå‹• dAppã€‚

Scaffold-ETH 2 å·¥å…·åŒ…ä½¿ç”¨ Next.jsã€RainbowKitã€Hardhatã€Foundryã€Wagmi å’Œ TypeScript å»ºç«‹ã€‚ é–‹ç™¼äººå“¡å¯ä»¥ä½¿ç”¨ Hardhat æˆ– Foundry è¼•é¬†å»ºç«‹ã€æ¸¬è©¦å’Œéƒ¨ç½²æ™ºæ…§å‹å¥‘ç´„ï¼Œä»¥åŠä½¿ç”¨ Next.js å»ºç«‹ React å‰ç«¯ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°‡å­¸ç¿’å¦‚ä½•ä½¿ç”¨ Scaffold-ETH 2 åœ¨ Kaia ä¸Šéƒ¨ç½²ã€åŸ·è¡Œå¥‘ç´„ä¸¦å»ºç«‹ dAppã€‚

## å…ˆæ±ºæ¢ä»¶<a href="#prerequisites" id="prerequisites" />

è¦é–‹å§‹ä½¿ç”¨æœ¬æŒ‡å—ï¼Œæ‚¨å°‡éœ€è¦ï¼š

* [Node (>= v18.17)](https://nodejs.org/en/download/)
* ç´—ç·š ([v1](https://classic.yarnpkg.com/en/docs/install/) æˆ– [v2+](https://yarnpkg.com/getting-started/install))
* ç†Ÿæ‚‰ Javascript å’Œ React åŸºç¤ï¼Œä¾‹å¦‚é‰¤å­
* [Metamask Wallet](https://metamask.io/download/)
* å¾ [æ°´é¾é ­] æ¸¬è©¦ KAIA(https://faucet.kaia.io)
* RPC ç«¯é»ï¼šæ‚¨å¯ä»¥å¾å…¶ä¸­ä¸€å€‹æ”¯æ´çš„ [ç«¯é»æä¾›è€…](https://docs.kaia.io/references/public-en/) å–å¾—ã€‚

## è¨­å®šé–‹ç™¼ç’°å¢ƒ<a href="#setting-up-dev-environment" id="setting-up-dev-environment" />

è¦å®‰è£ Scaffold-ETH 2ï¼Œæ‚¨æœ‰å…©å€‹é¸æ“‡ï¼Œä¸€æ˜¯å…‹éš† [Scaffold-ETH 2 å„²å­˜åº«](https://github.com/scaffold-eth/scaffold-eth-2) å®‰è£ï¼ŒäºŒæ˜¯ä½¿ç”¨ `npx create-eth@latest` å®‰è£ã€‚

åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘å€‘å°‡ä½¿ç”¨ npx æ–¹æ³•ä¾†å•Ÿå‹• Scaffold-ETH 2 å°ˆæ¡ˆã€‚

åŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤ï¼Œå•Ÿå‹• Scaffold-ETH 2 å°ˆæ¡ˆï¼š

```bash
npx create-eth@latest
```

æ‚¨æœƒçœ‹åˆ°ä¸€ç³»åˆ—æç¤ºï¼š

\*\* å°ˆæ¡ˆåç¨±\*\*ï¼šè¼¸å…¥å°ˆæ¡ˆåç¨±ï¼šè¼¸å…¥å°ˆæ¡ˆåç¨±ï¼Œä¾‹å¦‚ï¼škaia-scaffold-exampleã€‚

**Solidity Framework**ï¼›æ‚¨æƒ³ä½¿ç”¨ä½•ç¨® solidity æ¡†æ¶ï¼Ÿé¸æ“‡æ‚¨åå¥½çš„ solidity æ¡†æ¶ (Hardhat, Foundry)ã€‚ åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘å€‘å°‡ä½¿ç”¨ **Hardhat** æ¶æ§‹ã€‚

\*\* å®‰è£å¥—ä»¶ï¼Ÿ\*\*ï¼šæŒ‰ Enter è¡¨ç¤º yesï¼ˆé è¨­é¸é …ï¼‰ï¼Œæˆ–éµå…¥ n ä¸¦æŒ‰ Enter è¡¨ç¤º no
å®‰è£å®Œæˆå¾Œï¼Œå°èˆªåˆ°å°ˆæ¡ˆç›®éŒ„ã€‚

```bash
cd project-name
// e.g  cd kaia-scaffold-example
```

![Scaffold-ETH setup](/img/build/tutorials/scaffold-1.png)

## Scaffold-ETH 2 é–‹ç™¼éç¨‹çš„äº®é»<a href="#highlight-of-dev-environment" id="highlight-of-dev-environment" />

ä½¿ç”¨ Scaffold-ETH 2 é–‹ç™¼å°ˆæ¡ˆçš„æµç¨‹å¯æ¦‚è¿°å¦‚ä¸‹ï¼š

1. åœ¨ **packages/hardhat/hardhat.config.ts** æª”æ¡ˆä¸­æ›´æ–° Hardhat çš„ç¶²è·¯è¨­å®šï¼Œä»¥ Kaia ç‚ºç›®æ¨™
2. å°‡æ‚¨çš„æ™ºæ…§å‹å¥‘ç´„åŠ å…¥ **packages/hardhat/contracts**
3. ç·¨è¼¯ **packages/hardhat/deploy** ä¸­çš„éƒ¨ç½²æŒ‡ä»¤ç¢¼
4. å°‡æ‚¨çš„æ™ºæ…§å‹å¥‘ç´„éƒ¨ç½²åˆ° Kaia
5. ä½¿ç”¨ç¡¬å¸½é©—è­‰å¤–æ›ç¨‹å¼é©—è­‰æ‚¨çš„æ™ºæ…§å‹å¥‘ç´„
6. åœ¨ **packages/nextjs/scaffold.config.ts** æª”æ¡ˆä¸­è¨­å®šæ‚¨çš„å‰ç«¯ä»¥ Kaia ç‚ºç›®æ¨™
7. æ ¹æ“šéœ€è¦åœ¨ **packages/nextjs/pages** ç›®éŒ„ä¸­ç·¨è¼¯æ‚¨çš„å‰å°

åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘å€‘å°‡ä½¿ç”¨ Scaffold-ETH 2 å®‰è£å¾Œå¯ç”¨çš„é è¨­ç¯„ä¾‹å¥‘ç´„å’Œå‰ç«¯ã€‚ åªè¦ç‚º Kaia ä¿®æ”¹é€™äº›å…ƒä»¶å³å¯ã€‚ åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œæˆ‘å€‘æœƒå°‡çµ„æ…‹åˆ†å‰²æˆ **Hardhat** å’Œ **Next.js** çµ„æ…‹ã€‚

## ç¡¬å¸½é…ç½®

åœ¨æœ¬ç¯€ä¸­ï¼Œæ‚¨å°‡ä¿®æ”¹ Hardhat è¨­å®šæª”ä¸­çš„ç¶²è·¯è¨­å®šï¼Œä»¥ **packages/hardhat** è³‡æ–™å¤¾ä¸‹çš„ Kaia ç‚ºç›®æ¨™ã€‚

### ç‚º Kaia è¨­å®š Hardhat

**ç¬¬ 1 æ­¥ï¼šé…ç½®æ‚¨çš„ç¶²è·¯**

æˆ‘å€‘è¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è¨­å®š `hardhat.config.ts` ä»¥æ”¯æ´ Kaia ç¶²è·¯ã€‚ ç§»è‡³ `packages/hardhat/hardhat.config.ts` ä¸¦å°‡æ‚¨çš„ Kaia ç¶²è·¯æ–°å¢è‡³ networks ç‰©ä»¶ã€‚

<Tabs>
  <TabItem value="Kaia" label="Kaia Mainnet" default>
    ```javascript
      networks: {
        // â€¦ other networks
        kaia: {
          chainId: 8217,
          url: "https://public-en.node.kaia.io",
          accounts: [deployerPrivateKey],
        },
      }
    ```
  </TabItem>

  <TabItem value="å•Ÿå‹•" label="å•Ÿå‹•æ¸¬è©¦ç¶²è·¯">
    ```javascript
      networks: {
        // â€¦ other networks
        kairos: {
          chainId: 1001,
          url: "https://public-en-kairos.node.kaia.io",
          accounts: [deployerPrivateKey],
        },
      } 
    ```
  </TabItem>
</Tabs>

**æ­¥é©Ÿ 2ï¼šç”¢ç”Ÿä¸€å€‹æ–°å¸³æˆ¶æˆ–æ–°å¢ä¸€å€‹å¸³æˆ¶ï¼Œä»¥å¾ä¸­éƒ¨ç½²åˆç´„**

æ¥ä¸‹ä¾†æ‚¨è¦åšçš„å°±æ˜¯è¨­å®šæ‚¨çš„å¸³æˆ¶ã€‚  æ‚¨å¯ä»¥åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿç”¢ç”Ÿéš¨æ©Ÿå¸³è™Ÿ/ç§äººå¯†ç¢¼åŒ™ï¼š

```bash
yarn generate 
```

å®ƒæœƒè‡ªå‹•åœ¨æ‚¨çš„ã€Œ.envã€æª”æ¡ˆä¸­åŠ å…¥åŠ å¯†ç§å¯†é‡‘é‘° (DEPLOYER_PRIVATE_KEY_ENCRYPTED)ã€‚

:::note
ç³»çµ±æœƒæç¤ºæ‚¨è¼¸å…¥å¯†ç¢¼ï¼Œè©²å¯†ç¢¼å°‡ç”¨æ–¼åŠ å¯†æ‚¨çš„ç§äººå¯†ç¢¼åŒ™ã€‚ è«‹å‹¿å¿˜è¨˜é€™å€‹å¯†ç¢¼ï¼Œå› ç‚ºæ‚¨åœ¨æœªä¾†éƒ¨ç½²å’Œå¸³æˆ¶æŸ¥è©¢æ™‚æœƒç”¨åˆ°å®ƒã€‚
:::

å¦‚æœæ‚¨åå¥½åŒ¯å…¥ç§äººå¯†ç¢¼åŒ™ï¼Œè«‹åŸ·è¡Œï¼š

```bash
yarn account:import
```

ç³»çµ±æœƒæç¤ºæ‚¨è²¼ä¸Šç§äººå¯†ç¢¼åŒ™ï¼Œä¸¦è¨­å®šåŠ å¯†å¯†ç¢¼ã€‚ å®ƒæœƒå°‡ç¶“åŠ å¯†çš„ç§äººå¯†ç¢¼åŒ™å„²å­˜åœ¨æ‚¨çš„ `.env` æª”æ¡ˆä¸­ã€‚

æ‚¨å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼æª¢æŸ¥å·²è¨­å®šï¼ˆç”¢ç”Ÿæˆ–åŒ¯å…¥ï¼‰çš„å¸³æˆ¶å’Œé¤˜é¡ï¼š

```bash
yarn account
```

åœ¨æ­¤æ­¥é©Ÿä¸­ï¼Œæ‚¨é‚„éœ€è¦è¼¸å…¥å¯†ç¢¼ä¾†è§£å¯†ç§äººå¯†ç¢¼åŒ™ï¼Œä¸¦æª¢è¦–å¸³æˆ¶è³‡è¨Šå’Œé¤˜é¡ã€‚

### å‘ Kaia éƒ¨ç½²åˆåŒ

é…ç½® Hardhat ä»¥æ”¯æŒ Kaia ç¶²çµ¡å¾Œï¼Œä¸‹ä¸€æ­¥å°±æ˜¯ç·¨è­¯å’Œéƒ¨ç½²åˆåŒæ¨£æœ¬ã€‚

é¦–å…ˆï¼Œæ‚¨å¯ä»¥é€šéé‹è¡Œ

```bash
yarn compile
```

æ¥ä¸‹ä¾†ï¼Œè¦éƒ¨ç½²æ‚¨çš„åˆç´„ï¼Œæ‚¨æœ‰å…©å€‹é¸æ“‡ï¼š

\*\* é¸é … 1ï¼šè¨­å®šé è¨­ç¶²è·¯\*\*

åœ¨æ‚¨çš„ã€Œhardhat.config.tsã€æª”æ¡ˆä¸­ï¼Œå°‡ **defaultNetwork** æ¬„ä½è¨­å®šç‚º kaia æˆ– kairosã€‚

åŸ·è¡Œ `yarn deploy` æ™‚ï¼Œåˆç´„æœƒéƒ¨ç½²åˆ°æŒ‡å®šçš„é è¨­ç¶²è·¯ã€‚

\*\* é¸é … 2ï¼šæ˜ç¢ºæŒ‡å®šç¶²è·¯\*\*

è‹¥è¦éƒ¨ç½²åˆ°ç‰¹å®šç¶²è·¯ï¼Œè«‹åœ¨åŸ·è¡Œéƒ¨ç½²æŒ‡ä»¤æ™‚ä½¿ç”¨ `--network` æ¨™è¨˜ï¼š

```bash
yarn deploy --network network_name
```

ä¾‹å¦‚ï¼š `yarn deploy --network kairos`

\*\* è¼¸å‡º\*\*ï¼š

```bash
% yarn deploy

âœ” Enter password to decrypt private key:
Nothing to compile
No need to generate any newer typings.
deploying "YourContract" (tx: 0x90d0587fcbbfd34057c9bc8c77a3ae56807bcee20c19b278499ca5da70affbbb)...: deployed at 0xb1ea8476debb6d3021cC3a179B9eC21e01742d82 with 534186 gas
ğŸ‘‹ Initial greeting: Building Unstoppable Apps!!!
ğŸ“ Updated TypeScript contract definition file on ../nextjs/contracts/deployedContracts.ts
```

### é©—è­‰æ‚¨å·²éƒ¨ç½²çš„åˆç´„<a href="#verify-deployed-contract" id="verify-deployed-contract" />

è¦é©—è­‰å·²éƒ¨ç½²çš„åˆç´„ï¼Œæˆ‘å€‘æœƒä½¿ç”¨ç¡¬å¸½é©—è­‰å¤–æ›ç¨‹å¼ã€‚ æ‚¨åªéœ€è¦åœ¨ harhdat-verify etherscan é…ç½®ç‰©ä»¶ä¸‹çš„ **hardhat.config.ts** ä¸­åŠ å…¥ä¸‹åˆ—é…ç½®ã€‚

<Tabs>
  <TabItem value="Kaia" label="Kaia Mainnet" default>
    ```js
      etherscan: {
        apiKey: {
          kaia: "unnecessary",
        },
        customChains: [
          {
            network: "kaia",
            chainId: 8217,
            urls: {
              apiURL: "https://mainnet-api.kaiascan.io/hardhat-verify",
              browserURL: "https://kaiascan.io",
            },
          },
        ],
      },
    ```
  </TabItem>

  <TabItem value="å•Ÿå‹•" label="å•Ÿå‹•æ¸¬è©¦ç¶²è·¯">
    ```js
      etherscan: {
        apiKey: {
          kairos: "unnecessary",
        },
        customChains: [
          {
            network: "kairos",
            chainId: 1001,
            urls: {
              apiURL: "https://kairos-api.kaiascan.io/hardhat-verify",
              browserURL: "https://kairos.kaiascan.io",
            },
          },
        ],
      },
    ```
  </TabItem>
</Tabs>

æ¥ä¸‹ä¾†å°±æ˜¯åœ¨æ‚¨çš„çµ‚ç«¯æ©Ÿè¤‡è£½ä¸¦è²¼ä¸Šä»¥ä¸‹æŒ‡ä»¤ï¼Œä»¥é©—è­‰æ™ºæ…§å‹å¥‘ç´„ï¼š

ç¯„ä¾‹

```bash
yarn hardhat-verify --network network_name contract_address "Constructor arg 1"
```

å¯¦éš›

```bash
yarn hardhat-verify --network kairos 0xb1ea8476debb6d3021cC3a179B9eC21e01742d82
 "0xDe75f893078D25fBA2eE090A3971baF832F15A88"
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œè¦é©—è­‰æ‚¨çš„å¥‘ç´„ï¼Œæ‚¨å¿…é ˆå‚³å…¥ç¶²è·¯åç¨±ã€å¥‘ç´„ä½å€å’Œå»ºæ§‹å™¨åƒæ•¸ (å¦‚æœæœ‰)ã€‚ ç¨å€™ä¹‹å¾Œï¼Œä¸»æ§å°æœƒé¡¯ç¤ºé©—è­‰çµæœï¼Œå¦‚æœæˆåŠŸçš„è©±ï¼Œæœƒæä¾› KaiaScan ä¸Šå·²é©—è­‰çš„åˆç´„çš„ URLã€‚

\*\* è¼¸å‡º\*\*ï¼š

```bash
% yarn hardhat-verify --network kairos 0xb1ea8476debb6d3021cC3a179B9eC21e01742d82 "0xDe75f893078D25fBA2eE090A3971baF832F15A88"

Successfully submitted source code for contract
contracts/YourContract.sol:YourContract at 0xb1ea8476debb6d3021cC3a179B9eC21e01742d82
for verification on the block explorer. Waiting for verification result...

Successfully verified contract YourContract on the block explorer.
https://kairos.kaiascan.io/address/0xb1ea8476debb6d3021cC3a179B9eC21e01742d82#code
```

![Scaffold Verification](/img/build/tutorials/scaffold-3.png)

æœ‰é—œåœ¨ Kaia ä¸Šä½¿ç”¨ Hardhat Verify å¤–æ›ç¨‹å¼é©—è­‰æ™ºæ…§å¥‘ç´„çš„è©³ç´°è³‡è¨Šï¼Œè«‹åƒè€ƒ [Hardhat Verify Plugin guide](https://docs.kaia.io/build/smart-contracts/verify/hardhat/)ã€‚

## Next.js è¨­å®š<a href="#nextjs-configuration" id="nextjs-configuration" />

åœ¨æœ¬ç¯€ä¸­ï¼Œæ‚¨å°‡ä¿®æ”¹ Next.js é…ç½®ï¼Œä»¥é‡å°**packages/nextjs**è³‡æ–™å¤¾ä¸‹çš„ Kairos Testnet (æ™ºæ…§å‹å¥‘ç´„éƒ¨ç½²è‡³æ­¤)ã€‚ åœ¨æ­¤è³‡æ–™å¤¾ä¸­ï¼Œæˆ‘å€‘æ‰“ç®—ä¿®æ”¹ **scaffold.config.ts** æª”æ¡ˆä¸­ ScaffoldConfig ç‰©ä»¶çš„ **targetNetwork** é™£åˆ—ã€‚

### ä¿®æ”¹ targetNetwork é™£åˆ—<a href="#modify-targetnetwork-array" id="modify-targetnetwork-array" />

```js
targetNetworks: [chains.kaia, chains.kairos],
```

é€™æ˜¯è¨­å®š Next.js æ‰€éœ€çš„å…¨éƒ¨æ­¥é©Ÿï¼ æ¥ä¸‹ä¾†ï¼Œåœ¨æ‚¨çš„ localhost ä¸­å•Ÿå‹• dAppã€‚

### åœ¨æ‚¨çš„ Localhost ä¸­å•Ÿå‹• dApp<a href="#launch-dapp-in-localhost" id="launch-dapp-in-localhost" />

å®Œæˆæ‰€æœ‰å¿…è¦çš„è¨­å®šå¾Œï¼Œæ‚¨å°±å¯ä»¥åœ¨æ‚¨çš„ localhost ä¸Šå•Ÿå‹•ç¯„ä¾‹ dAppã€‚

è‹¥è¦åŸ·è¡Œï¼Œè«‹åŸ·è¡Œï¼š

```bash
yarn start
```

ç¾åœ¨æ‚¨æ‡‰è©²å¯ä»¥åœ¨ http://localhost:3000/ å­˜å–åŸºæ–¼ React çš„ dApp å‰ç«¯ã€‚ è«‹éš¨æ™‚é€éé€£æ¥æ‚¨çš„éŒ¢åŒ…æˆ–æŸ¥çœ‹åˆç´„èª¿è©¦å™¨é é¢èˆ‡ dApp é€²è¡Œäº’å‹•ã€‚

![Scaffold dApp](/img/build/tutorials/scaffold-5.png)

## ç¸½çµ

æ­å–œæ‚¨ æ‚¨å·²æˆåŠŸä½¿ç”¨ Scaffold-ETH 2 åœ¨ Kaia ä¸Šéƒ¨ç½²åˆç´„ä¸¦åŸ·è¡Œ dAppã€‚ ç¾åœ¨æ‚¨å·²ç­è§£ Scaffold-ETH 2 çš„é‹ä½œæ–¹å¼ï¼Œè«‹éš¨æ„å»ºç«‹å’Œéƒ¨ç½²æ‚¨è‡ªå·±çš„æ™ºæ…§å¥‘ç´„ï¼Œä¸¦ä¿®æ”¹å‰ç«¯ä»¥ç¬¦åˆæ‚¨ dApp çš„éœ€æ±‚ï¼

è«‹é€ è¨ª [Scaffold-ETH 2 Docs](https://docs.scaffoldeth.io/) ä»¥å–å¾—æ›´å¤šè³‡è¨Šï¼Œå¦‚æœæ‚¨æœ‰ä»»ä½•å•é¡Œï¼Œè«‹é€ è¨ª [Kaia Forum](https://devforum.kaia.io/) ã€‚
